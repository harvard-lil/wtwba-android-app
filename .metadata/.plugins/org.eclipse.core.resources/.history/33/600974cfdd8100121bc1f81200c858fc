package edu.harvad.law.librarylab.wtwba;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

class RetreiveFeedTask extends AsyncTask<String, Void, RetrieveItemData> {

    private Exception exception;

    protected RetrieveItemData doInBackground(String... urls) {
    	
    	
    	

        
        String response = "getting response";
        
          DefaultHttpClient client = new DefaultHttpClient();
          HttpGet httpGet = new HttpGet("http://librarylab.law.harvard.edu");
          try {
            HttpResponse execute = client.execute(httpGet);
            InputStream content = execute.getEntity().getContent();

            BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
            String s = "";
            while ((s = buffer.readLine()) != null) {
              response += s;
            }
            Log.w("wtwba", s);

          } catch (Exception e) {
            e.printStackTrace();
          }
        
        
        
        
        
        
        	// Create the text view
    	    //TextView textView = new TextView(this);
    	    //textView.setTextSize(40);
    	    //textView.setText(response);

    	    // Set the text view as the activity layout
    	    //setContentView(textView);
    	
    	
    	
    	
    	
        /*try {
            URL url= new URL(urls[0]);
            SAXParserFactory factory =SAXParserFactory.newInstance();
            SAXParser parser=factory.newSAXParser();
            XMLReader xmlreader=parser.getXMLReader();
            RssHandler theRSSHandler=new RssHandler();
            xmlreader.setContentHandler(theRSSHandler);
            InputSource is=new InputSource(url.openStream());
            xmlreader.parse(is);
            return theRSSHandler.getFeed();
        } catch (Exception e) {
            this.exception = e;
            return null;
        }*/
    }

    protected void onPostExecute(RetrieveItemData feed) {
        // TODO: check this.exception 
        // TODO: do something with the feed
    }
 }
